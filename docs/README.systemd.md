# Systemd for Archiver Appliance

There are a plenty of ways to use the systemd service within systemd service.
We use here the simplest one. We already have all global configuration file
`archapplconf` in `INSTALL_LOCATION`. And each service has the standard tomcat
`webapp` structure and files, which is very similar with ones generated by
`tomcat9-instance-create`. Each service has its own startup and shutdown scripts.
Thus, we simply call them in order within a global wrapper script. It gives us
more flexiable way to see how thing works without systemd serivce also and to
locate the archiver appliance anywhere we would like to locate.

Thus, the systemd file is simple such as

```bash
[Unit]
Description=EPICS Archiver Appliance for als
Documentation=https://github.com/slacmshankar/epicsarchiverap
After=network.target
SourcePath=/opt/epicsarchiverap/archappl.bash

[Service]
#
User=tomcat
Group=tomcat
#
ExecStart=/bin/bash -c "/opt/epicsarchiverap/archappl.bash startup"
ExecStop=/bin/bash -c "/opt/epicsarchiverap/archappl.bash shutdown"
Type=forking

[Install]
WantedBy=multi-user.target
Alias=archappl.service

[Unit]
Description=EPICS Archiver Appliance for @ARCHAPPL_SITEID@
Documentation=https://github.com/slacmshankar/epicsarchiverap
After=network.target
SourcePath=/opt/epicsarchiverap/archappl.bash
```
