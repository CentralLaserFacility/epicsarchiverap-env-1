#
#
INSTALL:= install
INSTALL_PROGRAM:=$(INSTALL)
INSTALL_DATA:=$(INSTALL) -m 644
INSTALL_755:=$(INSTALL) -m 755

# IF INSTALL_LOCATIOIN is not WRITABLE, SUDO and SUDOBASH should be used 
# SUDO_INFO 1 : SUDO is needed (NOT writable)
# SUDO_INFO 0 : SUDO is not needed
SUDO_INFO := $(shell test -w $(INSTALL_LOCATION) 1>&2 2> /dev/null; echo $$?)
SUDO_CMD := $(shell which sudo)

# For CentOS, devtoolset-{7,8} has -E option within sudo shell
# So we have to remove -E option as well if we would like to use devtoolset
#
ifeq "$(SUDO_INFO)" "1"
SUDO = $(SUDO_CMD)
SUDOBASH := $(SUDO) -E bash -c
else
SUDO :=
SUDOBASH = bash -c
endif

#
SITE_TEMPLATE_PATH:=$(TOP)/site-template
#

ANT_CMD:=$(ANT_PATH)/ant
MAVEN_CMD:=$(MAVE_PATH)/mvn
JAVA_CMD:=$(JAVA_PATH)/java 




## log4j_properties located in $(TOMCAT_HOME)/lib 
ARCHAPPL_LOG4JPROPERTIES:=log4j.properties

ARCHAPPL_SINGLE_IDENTITY=appliance0
## The following three files will in $(INSTALL_LOCATION)
ARCHAPPL_APPLIANCES:=appliances.xml
ARCHAPPL_POLICIES:=policies.py
ARCHAPPL_PROPERTIES:=archappl.properties
ARCHAPPL_TOMCAT_CONF:=tomcat.conf

## $(INSTALL_LOCATION)/*/conf 
ARCHAPPL_CONTEXT_XML:=context.xml

ARCHAPPL_TOMCAT_STARTUP:=startup.sh
ARCHAPPL_TOMCAT_SHUTDOWN:=shutdown.sh

ARCHAPPL_CLUSTER_INETPORT:=$(ARCHAPPL_HOST_IPADDR):16670
ARCHAPPL_MGMT_URL:=http://$(ARCHAPPL_HOST_IPADDR):17665/mgmt/bpl
ARCHAPPL_ENGINE_URL:=http://$(ARCHAPPL_HOST_IPADDR):17666/engine/bpl
ARCHAPPL_ETL_URL:=http://$(ARCHAPPL_HOST_IPADDR):17667/etl/bpl
ARCHAPPL_RETRIEVAL_URL:=http://$(ARCHAPPL_HOST_IPADDR):17668/retrieval/bpl
ARCHAPPL_DATA_RETRIEVAL_URL:=http://$(ARCHAPPL_HOST_IPADDR):17668/retrieval


# Service order is matter, don't change them
ARCHAPPL_SERVICES:=mgmt engine etl retrieval
INSTALL_LOCATION_SERVICES:=$(addprefix $(INSTALL_LOCATION)/, $(ARCHAPPL_SERVICES))
#ARCHAPPL_UPPERCASE_SERVICES:=$(shell  echo "$(ARCHAPPL_SERVICES)" | tr '[:lower:]' '[:upper:]')
#


VARS_EXCLUDES+=SRC_PATH_INFO
VARS_EXCLUDES+=INSTALL
VARS_EXCLUDES+=INSTALL_PROGRAM
VARS_EXCLUDES+=INSTALL_DATA
VARS_EXCLUDES+=SUDOBASH
VARS_EXCLUDES+=INSTALL_755





