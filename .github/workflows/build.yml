name: Build

on: [push, pull_request]

name: CI

on:
  push:
    branches: [ master ]

jobs:
  Ubuntu:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: |
          apt update -y
          apt install -y git make sudo
          make init
          make install.pkgs
          make install.jdk
          make conf.jdk
          make install.ant
          make conf.ant
          make build
          make install
          make exist
          make conf.archappl.show
    
  Debian10:
    runs-on: ubuntu-latest
    container: debian:stable
    steps:
      - uses: actions/checkout@v2
      - run: |
          apt update -y
          apt install -y git make sudo
          make init
          make install.pkgs
          make install.jdk
          make conf.jdk
          make install.ant
          make conf.ant
          make build
          make install
          make exist
          make conf.archappl.show
      
  CentOS7:
    runs-on: ubuntu-latest
    container: centos:7
    steps:
      - uses: actions/checkout@v2
      - run: |
          yum update -y
          yum install -y git make sudo
          make init
          make install.pkgs
          make install.jdk
          make conf.jdk
          make install.ant
          make conf.ant
          make build
          make install
          make exist
          make conf.archappl.show
      
  Rocky8:
    runs-on: ubuntu-latest
    container: rockylinux/rockylinux
    steps:
      - uses: actions/checkout@v2
      - run: |
          dnf update -y
          dnf install -y git make sudo
          make init
          make install.pkgs
          make install.jdk
          make conf.jdk
          make install.ant
          make conf.ant
          make build
          make install
          make exist
          make conf.archappl.show
      
